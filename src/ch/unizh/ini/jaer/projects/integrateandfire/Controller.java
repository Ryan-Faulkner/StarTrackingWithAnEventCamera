/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * Controller.java
 *
 * Created on Sep 21, 2011, 11:19:16 AM
 */

package ch.unizh.ini.jaer.projects.integrateandfire;

/**
 *
 * @author tobi
 */
public class Controller extends Plotter /*javax.swing.JFrame*/  {

    /** Creates new form Controller */
    public Controller() {
        initComponents();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        editUnitFrom = new javax.swing.JTextField();
        labTotal = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        editThresh = new javax.swing.JTextField();
        butThresh = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        editTC = new javax.swing.JTextField();
        butTC = new javax.swing.JButton();
        butFire = new javax.swing.JButton();
        editUnitTo = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Units:");

        editUnitFrom.setText("0");
        editUnitFrom.addActionListener(new java.awt.event.ActionListener() {
            @Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
                editUnitFromActionPerformed(evt);
            }
        });

        labTotal.setText("total");

        jLabel2.setText("Threshold:");

        butThresh.setText("set");
        butThresh.addActionListener(new java.awt.event.ActionListener() {
            @Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
                butThreshActionPerformed(evt);
            }
        });

        jLabel3.setText("Time Const (s):");

        butTC.setText("set");
        butTC.addActionListener(new java.awt.event.ActionListener() {
            @Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
                butTCActionPerformed(evt);
            }
        });

        butFire.setText("FIRE");
        butFire.addActionListener(new java.awt.event.ActionListener() {
            @Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
                butFireActionPerformed(evt);
            }
        });

        editUnitTo.setText("0");
        editUnitTo.addActionListener(new java.awt.event.ActionListener() {
            @Override
			public void actionPerformed(java.awt.event.ActionEvent evt) {
                editUnitToActionPerformed(evt);
            }
        });

        jLabel4.setText("from:");

        jLabel5.setText("to:");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel3)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(butFire, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                            .addComponent(editTC, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(editThresh, javax.swing.GroupLayout.Alignment.LEADING, javax.swing.GroupLayout.DEFAULT_SIZE, 121, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(butTC, javax.swing.GroupLayout.DEFAULT_SIZE, 53, Short.MAX_VALUE)
                            .addComponent(butThresh, javax.swing.GroupLayout.DEFAULT_SIZE, 53, Short.MAX_VALUE)))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel4)
                            .addComponent(editUnitFrom, javax.swing.GroupLayout.DEFAULT_SIZE, 43, Short.MAX_VALUE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(jLabel5)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(3, 3, 3)
                                .addComponent(editUnitTo, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(labTotal, javax.swing.GroupLayout.PREFERRED_SIZE, 80, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                .addGap(19, 19, 19))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                            .addComponent(jLabel1)
                            .addComponent(editUnitFrom, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(labTotal)))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(editUnitTo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel2)
                    .addComponent(editThresh, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(butThresh))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(editTC, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(butTC))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(butFire, javax.swing.GroupLayout.PREFERRED_SIZE, 45, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(16, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void butThreshActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butThreshActionPerformed

        float thresh=Float.parseFloat(this.editThresh.getText());

        for (int i=minU; i<=maxU; i++) {
			NN.N[i].thresh=thresh;
		}

    }//GEN-LAST:event_butThreshActionPerformed

    private void butTCActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butTCActionPerformed

        float TC=Float.parseFloat(this.editTC.getText());

        for (int i=minU; i<=maxU; i++) {
			NN.N[i].tau=TC;
		}

    }//GEN-LAST:event_butTCActionPerformed

    private void editUnitFromActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editUnitFromActionPerformed
        // Set Lower range limit:

        setrange(Integer.parseInt(this.editUnitFrom.getText()),Integer.parseInt(this.editUnitTo.getText()));
    }//GEN-LAST:event_editUnitFromActionPerformed

    private void editUnitToActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_editUnitToActionPerformed
        // Set upper range limit

        setrange(Integer.parseInt(this.editUnitFrom.getText()),Integer.parseInt(this.editUnitTo.getText()));

    }//GEN-LAST:event_editUnitToActionPerformed

    private void butFireActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_butFireActionPerformed

        //for (int i=minU; i<=maxU; i++)
            //NN.propagate(i,0);

    }//GEN-LAST:event_butFireActionPerformed

    /**
    * @param args the command line arguments
    */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
			public void run() {
                new Controller().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    public javax.swing.JButton butFire;
    public javax.swing.JButton butTC;
    public javax.swing.JButton butThresh;
    public javax.swing.JTextField editTC;
    public javax.swing.JTextField editThresh;
    public javax.swing.JTextField editUnitFrom;
    public javax.swing.JTextField editUnitTo;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    public javax.swing.JLabel labTotal;
    // End of variables declaration//GEN-END:variables


    /*
     * And here is the custom code linking the GUI to the network.
     *
     * */


    public int minU;
    public int maxU;
    public LIFNet NN;

    @Override
    public void update(int timestamp) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void init() {

        setrange(0,NN.N.length-1);
        this.labTotal.setText("("+NN.N.length+" units in total)");

        this.setVisible(true);
    }


    public void setrange(int min, int max)
    {
        if (min < 0) {
			min=0;
		}
        if (max >= NN.N.length) {
			max=NN.N.length-1;
		}

        minU=min;
        maxU=max;

        this.setTitle("Units "+minU+"-"+maxU);

    }

    @Override
    void refresh() {
        throw new UnsupportedOperationException("Not supported yet.");
    }



}
